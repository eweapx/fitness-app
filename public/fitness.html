<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
  <style>
    body {
      padding-top: 20px;
      padding-bottom: 130px; /* Extra space for two-row bottom navigation */
    }
    .card {
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .stat-card {
      text-align: center;
      padding: 15px;
    }
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: #007bff;
    }
    .activity-item {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .activity-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-size: 1.5rem;
    }
    .nav-tabs .nav-link {
      border: none;
      color: #495057;
      font-weight: 500;
    }
    .nav-tabs .nav-link.active {
      color: #007bff;
      border-bottom: 3px solid #007bff;
    }
    
    /* Bottom Navigation Styles */
    .bottom-nav {
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      padding: 5px 0;
    }
    
    .bottom-nav .nav-link {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #6c757d;
      padding: 8px 0;
      font-size: 0.85rem;
    }
    
    .bottom-nav .nav-link i {
      font-size: 1.2rem;
      margin-bottom: 4px;
    }
    
    .bottom-nav .nav-link.active {
      color: #0d6efd;
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="mb-4">
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary rounded">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Fitness Tracker</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" href="#" id="dashboard-tab">Dashboard</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" id="workouts-tab">Workouts</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" id="nutrition-tab">Nutrition</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" id="habits-tab">Bad Habits</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" id="profile-link" data-bs-toggle="modal" data-bs-target="#profileModal">Profile</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" id="about-link" data-bs-toggle="modal" data-bs-target="#aboutModal">About</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <!-- Dashboard Section -->
      <div id="dashboard-content" class="content-section">
        <div class="row mb-4">
          <div class="col-md-4">
            <div class="card stat-card">
              <h5>Steps</h5>
              <div class="stat-value" id="steps-count">5,000</div>
              <button class="btn btn-sm btn-outline-primary mt-2" id="add-steps-btn" data-bs-toggle="modal" data-bs-target="#stepsModal">+ Add Steps</button>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card stat-card">
              <h5>Calories Burned</h5>
              <div class="stat-value" id="calories-count">400</div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card stat-card">
              <h5>Activities</h5>
              <div class="stat-value" id="activities-count">2</div>
              <button class="btn btn-sm btn-outline-primary mt-2" data-bs-toggle="modal" data-bs-target="#activityModal">
                + Log Activity
              </button>
            </div>
          </div>
        </div>

        <!-- Progress Chart -->
        <div class="card mb-4">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Activity Trends</h5>
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-sm btn-outline-secondary active" id="weekly-view">Week</button>
              <button type="button" class="btn btn-sm btn-outline-secondary" id="monthly-view">Month</button>
            </div>
          </div>
          <div class="card-body">
            <canvas id="progress-chart" height="200"></canvas>
          </div>
        </div>
        
        <!-- Recent Activities -->
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Recent Activities</h5>
          </div>
          <div class="card-body">
            <div id="activities-list">
              <!-- Activities will be added here dynamically -->
            </div>
            <div id="no-activities" style="display: none;">
              <div class="text-center py-5">
                <p class="text-muted">No activities logged yet.</p>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#activityModal">
                  Log Your First Activity
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Activity Modal -->
      <div class="modal fade" id="activityModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Log Activity</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="activity-form">
                <div class="mb-3">
                  <label for="activity-name" class="form-label">Activity Name</label>
                  <input type="text" class="form-control" id="activity-name" required>
                </div>
                <div class="mb-3">
                  <label for="activity-type" class="form-label">Activity Type</label>
                  <select class="form-select" id="activity-type" required>
                    <option value="">Select activity type</option>
                    <option value="running">Running</option>
                    <option value="cycling">Cycling</option>
                    <option value="swimming">Swimming</option>
                    <option value="weights">Weight Training</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="activity-duration" class="form-label">Duration (minutes)</label>
                  <input type="number" class="form-control" id="activity-duration" min="1" required>
                </div>
                <div class="mb-3">
                  <label for="activity-calories" class="form-label">Calories Burned</label>
                  <input type="number" class="form-control" id="activity-calories" min="1" required>
                </div>
                <button type="submit" class="btn btn-primary">Save Activity</button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Steps Modal -->
      <div class="modal fade" id="stepsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Add Steps</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="steps-form">
                <div class="mb-3">
                  <label for="steps-count-input" class="form-label">Number of Steps</label>
                  <input type="number" class="form-control" id="steps-count-input" min="1" required>
                </div>
                <button type="submit" class="btn btn-primary">Save Steps</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Bottom Navigation -->
  <nav class="navbar fixed-bottom navbar-light bg-white bottom-nav">
    <div class="container">
      <div class="row w-100 text-center">
        <div class="col">
          <a class="nav-link active" href="#" id="home-nav">
            <i class="bi bi-house-door"></i>
            <span>Home</span>
          </a>
        </div>
        <div class="col">
          <a class="nav-link" href="#" id="activity-nav">
            <i class="bi bi-activity"></i>
            <span>Activities</span>
          </a>
        </div>
        <div class="col">
          <a class="nav-link" href="#" id="workout-nav">
            <i class="bi bi-lightning"></i>
            <span>Workouts</span>
          </a>
        </div>
        <div class="col">
          <a class="nav-link" href="#" id="habits-nav">
            <i class="bi bi-calendar-check"></i>
            <span>Habits</span>
          </a>
        </div>
        <div class="col">
          <a class="nav-link" href="#" id="more-nav">
            <i class="bi bi-three-dots"></i>
            <span>More</span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- JavaScript Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
  
  <!-- Chart.js for data visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Application Code -->
  <script src="js/utils.js"></script>
  <script src="js/activity.js"></script>
  <script src="js/badHabit.js"></script>
  <script src="js/nutrition.js"></script>
  <script src="js/sleep.js"></script>
  <script src="js/healthConnections.js"></script>
  <script src="js/healthSnapshot.js"></script>
  <script src="js/user.js"></script>
  <script src="js/workout.js"></script>
  <script src="js/workout-ui.js"></script>
  <script src="js/app.js"></script>
  
  <script>
    // Basic event handlers for demo purposes
    document.addEventListener('DOMContentLoaded', function() {
      // Set up some basic event handlers
      document.getElementById('home-nav').addEventListener('click', function(e) {
        e.preventDefault();
        // Activate this tab
        document.querySelectorAll('.bottom-nav .nav-link').forEach(el => el.classList.remove('active'));
        this.classList.add('active');
      });
      
      // Initialize the fitness tracker UI
      try {
        // Update dashboard stats
        document.getElementById('steps-count').textContent = formatNumberWithCommas(tracker.getTotalSteps());
        document.getElementById('calories-count').textContent = formatNumberWithCommas(tracker.getTotalCalories());
        document.getElementById('activities-count').textContent = tracker.getActivitiesCount();
        
        // Set up activity form handling
        document.getElementById('activity-form').addEventListener('submit', handleActivityFormSubmit);
        
        // Set up steps form handling
        document.getElementById('steps-form').addEventListener('submit', handleStepsFormSubmit);
        
        // Update activities list
        updateActivitiesList();
      } catch (error) {
        console.error('Error initializing fitness tracker:', error);
      }
    });
    
    // Handle activity form submission
    function handleActivityFormSubmit(event) {
      event.preventDefault();
      
      const name = document.getElementById('activity-name').value;
      const type = document.getElementById('activity-type').value;
      const duration = parseInt(document.getElementById('activity-duration').value);
      const calories = parseInt(document.getElementById('activity-calories').value);
      
      // Create a new activity
      const activity = new Activity(name, calories, duration, type);
      
      // Add to tracker
      tracker.addActivity(activity);
      
      // Update UI
      document.getElementById('steps-count').textContent = formatNumberWithCommas(tracker.getTotalSteps());
      document.getElementById('calories-count').textContent = formatNumberWithCommas(tracker.getTotalCalories());
      document.getElementById('activities-count').textContent = tracker.getActivitiesCount();
      
      // Update activities list
      updateActivitiesList();
      
      // Close modal
      const modal = bootstrap.Modal.getInstance(document.getElementById('activityModal'));
      modal.hide();
      
      // Reset form
      event.target.reset();
    }
    
    // Handle steps form submission
    function handleStepsFormSubmit(event) {
      event.preventDefault();
      
      const steps = parseInt(document.getElementById('steps-count-input').value);
      
      // Add steps to tracker
      tracker.addSteps(steps);
      
      // Update UI
      document.getElementById('steps-count').textContent = formatNumberWithCommas(tracker.getTotalSteps());
      
      // Close modal
      const modal = bootstrap.Modal.getInstance(document.getElementById('stepsModal'));
      modal.hide();
      
      // Reset form
      event.target.reset();
    }
    
    // Update the activities list
    function updateActivitiesList() {
      const activitiesList = document.getElementById('activities-list');
      const noActivities = document.getElementById('no-activities');
      
      const activities = tracker.getActivities();
      
      if (activities.length === 0) {
        activitiesList.innerHTML = '';
        noActivities.style.display = 'block';
        return;
      }
      
      noActivities.style.display = 'none';
      
      // Clear current list
      activitiesList.innerHTML = '';
      
      // Add each activity
      activities.forEach(activity => {
        const div = document.createElement('div');
        div.className = 'activity-item d-flex align-items-center';
        
        // Set icon background color based on activity type
        let iconClass = 'bg-primary text-white';
        let iconContent = '<i class="bi bi-person-walking"></i>';
        
        if (activity.type === 'cycling') {
          iconClass = 'bg-success text-white';
          iconContent = '<i class="bi bi-bicycle"></i>';
        } else if (activity.type === 'swimming') {
          iconClass = 'bg-info text-white';
          iconContent = '<i class="bi bi-water"></i>';
        } else if (activity.type === 'weights') {
          iconClass = 'bg-danger text-white';
          iconContent = '<i class="bi bi-trophy"></i>';
        }
        
        div.innerHTML = `
          <div class="activity-icon ${iconClass}">
            ${iconContent}
          </div>
          <div>
            <h6 class="mb-0">${activity.name}</h6>
            <div class="text-muted">
              ${activity.getFormattedDate()} • ${activity.duration} min • ${activity.calories} cal
            </div>
          </div>
        `;
        
        activitiesList.appendChild(div);
      });
    }
    
    // Format number with commas
    function formatNumberWithCommas(number) {
      return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
  </script>
</body>
</html>